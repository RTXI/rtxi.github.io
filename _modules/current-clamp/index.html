---
title: current-clamp
layout: module
categories: module
---

<a href="https://github.com/rtxi/current-clamp"><img style="position: absolute; top: 50px; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a><h3>Current Clamp</h3>

<p><strong>Requirements:</strong> GSL, Qwt, SpikeDetect plugin, Plot helper classes, Running Statistics class (included)<br>
<strong>Limitations:</strong> None  </p>

<p><img src="current-clamp.png" alt="Current Clamp GUI"></p>

<p>This plugin allows you to deliver a protocol for current step or current ramp inputs. You can randomize the order of amplitudes used and repeat the entire protocol a certain number of times. For current step inputs, you can also choose to plot the f-I curve as it is generated. For each complete cycle through all the command currents, the plot symbol will change. The firing rate is computed by taking the reciprocal of the average ISI detected during a command input. Plotting the f-I curve will also enable buttons that allow you to perform a linear regression, print the plot, save a screenshot in SVG format, or save the data points. Only the data points generated in the last run are saved and you can append them to an existing file. The linear regression is performed on ALL data points in the plot, not just those generated in the last run. If you add points to the plot and perform another regression, you will get another line. Zoom in on the plot by clicking and dragging with the mouse. Middle click to go back to the previous zoom. All the data points and coefficients and statistics for each regression are printed to the terminal.</p>

<h4>Usage/Dependencies/Installation:</h4>

<p>The include folder (containing the ScatterPlot, IncrementalPlot, ScrollBar, ScrollZoomer, and RunningStat classes) should be located on the same directory level as CClamp3. The <a href="http://www.gnu.org/software/gsl/">GPL GSL library</a> is used to perform a linear regression on data points. If you installed RTXI from a Live CD, you should already have GSL. If you did a manual installation of RTXI, you should install GSL using your Linux distribution’s package manager. In Ubuntu, the package manager can be found in the toolbar under Administration. Alternatively, you can install via the apt repository by running:</p>

<pre><code>$ sudo apt-get install libgsl0-dev
</code></pre>

<p>The f-I scatterplot is based on <a href="http://qwt.sourceforge.net/">LGPL Qwt widgets</a>. Follow the instructions in the manual installation notes to correctly install Qwt for RTXI.</p>

<h4>Input Channels</h4>

<ol>
<li>input(0) – “Spike State” : received from SpikeDetect plugin. A value of 1 indicates the spike time.</li>
</ol>

<h4>Output Channels</h4>

<ol>
<li>output(0) – “Command” : Step (or ramp) current command in amperes. Connect to the amplifer external signal input.</li>
</ol>

<h4>Parameters</h4>

<ol>
<li>Minimum Amplitude (pA): Minimum amplitude of current step/ramp</li>
<li>Maximum Amplitude (pA): Maximum amplitude of current step/ramp</li>
<li>Step Size (pA): Step size to use between minimum and maximum current amplitudes</li>
<li>Delay (s): Delay between the end of one command input and the start of the next</li>
<li>Width (s): Width of a command input</li>
<li>Repeat: How many times to repeat the entire protocol (you will get a scatterplot of data points)</li>
</ol>

<h4>Options</h4>

<ol>
<li>Randomize – Randomize the amplitudes within the protocol. Each repetition of the protocol is randomized within that cycle.</li>
<li>Plot FI Curve – Check to show/hide the FI Plot, and plot the data points as they are generated.</li>
</ol>
